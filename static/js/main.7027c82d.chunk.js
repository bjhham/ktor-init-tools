(this["webpackJsonpktor-generator-frontend"]=this["webpackJsonpktor-generator-frontend"]||[]).push([[0],{357:function(e,t,n){},358:function(e,t,n){},463:function(e,t,n){},465:function(e,t,n){},474:function(e,t,n){},573:function(e,t,n){},574:function(e,t,n){},575:function(e,t,n){},576:function(e,t,n){},605:function(e,t,n){},607:function(e,t,n){},608:function(e,t,n){},609:function(e,t,n){},667:function(e,t,n){var r={"./autolinker/prism-autolinker":252,"./autolinker/prism-autolinker.css":668,"./autolinker/prism-autolinker.js":252,"./autolinker/prism-autolinker.min":253,"./autolinker/prism-autolinker.min.js":253,"./autoloader/prism-autoloader":254,"./autoloader/prism-autoloader.js":254,"./autoloader/prism-autoloader.min":255,"./autoloader/prism-autoloader.min.js":255,"./command-line/prism-command-line":256,"./command-line/prism-command-line.css":669,"./command-line/prism-command-line.js":256,"./command-line/prism-command-line.min":257,"./command-line/prism-command-line.min.js":257,"./copy-to-clipboard/prism-copy-to-clipboard":258,"./copy-to-clipboard/prism-copy-to-clipboard.js":258,"./copy-to-clipboard/prism-copy-to-clipboard.min":260,"./copy-to-clipboard/prism-copy-to-clipboard.min.js":260,"./custom-class/prism-custom-class":261,"./custom-class/prism-custom-class.js":261,"./custom-class/prism-custom-class.min":262,"./custom-class/prism-custom-class.min.js":262,"./data-uri-highlight/prism-data-uri-highlight":263,"./data-uri-highlight/prism-data-uri-highlight.js":263,"./data-uri-highlight/prism-data-uri-highlight.min":264,"./data-uri-highlight/prism-data-uri-highlight.min.js":264,"./diff-highlight/prism-diff-highlight":265,"./diff-highlight/prism-diff-highlight.css":670,"./diff-highlight/prism-diff-highlight.js":265,"./diff-highlight/prism-diff-highlight.min":266,"./diff-highlight/prism-diff-highlight.min.js":266,"./download-button/prism-download-button":267,"./download-button/prism-download-button.js":267,"./download-button/prism-download-button.min":268,"./download-button/prism-download-button.min.js":268,"./file-highlight/prism-file-highlight":269,"./file-highlight/prism-file-highlight.js":269,"./file-highlight/prism-file-highlight.min":270,"./file-highlight/prism-file-highlight.min.js":270,"./filter-highlight-all/prism-filter-highlight-all":271,"./filter-highlight-all/prism-filter-highlight-all.js":271,"./filter-highlight-all/prism-filter-highlight-all.min":272,"./filter-highlight-all/prism-filter-highlight-all.min.js":272,"./highlight-keywords/prism-highlight-keywords":273,"./highlight-keywords/prism-highlight-keywords.js":273,"./highlight-keywords/prism-highlight-keywords.min":274,"./highlight-keywords/prism-highlight-keywords.min.js":274,"./inline-color/prism-inline-color":275,"./inline-color/prism-inline-color.css":671,"./inline-color/prism-inline-color.js":275,"./inline-color/prism-inline-color.min":276,"./inline-color/prism-inline-color.min.js":276,"./jsonp-highlight/prism-jsonp-highlight":277,"./jsonp-highlight/prism-jsonp-highlight.js":277,"./jsonp-highlight/prism-jsonp-highlight.min":278,"./jsonp-highlight/prism-jsonp-highlight.min.js":278,"./keep-markup/prism-keep-markup":279,"./keep-markup/prism-keep-markup.js":279,"./keep-markup/prism-keep-markup.min":280,"./keep-markup/prism-keep-markup.min.js":280,"./line-highlight/prism-line-highlight":281,"./line-highlight/prism-line-highlight.css":672,"./line-highlight/prism-line-highlight.js":281,"./line-highlight/prism-line-highlight.min":282,"./line-highlight/prism-line-highlight.min.js":282,"./line-numbers/prism-line-numbers":283,"./line-numbers/prism-line-numbers.css":673,"./line-numbers/prism-line-numbers.js":283,"./line-numbers/prism-line-numbers.min":284,"./line-numbers/prism-line-numbers.min.js":284,"./match-braces/prism-match-braces":285,"./match-braces/prism-match-braces.css":674,"./match-braces/prism-match-braces.js":285,"./match-braces/prism-match-braces.min":286,"./match-braces/prism-match-braces.min.js":286,"./normalize-whitespace/prism-normalize-whitespace":287,"./normalize-whitespace/prism-normalize-whitespace.js":287,"./normalize-whitespace/prism-normalize-whitespace.min":288,"./normalize-whitespace/prism-normalize-whitespace.min.js":288,"./previewers/prism-previewers":289,"./previewers/prism-previewers.css":675,"./previewers/prism-previewers.js":289,"./previewers/prism-previewers.min":290,"./previewers/prism-previewers.min.js":290,"./remove-initial-line-feed/prism-remove-initial-line-feed":291,"./remove-initial-line-feed/prism-remove-initial-line-feed.js":291,"./remove-initial-line-feed/prism-remove-initial-line-feed.min":292,"./remove-initial-line-feed/prism-remove-initial-line-feed.min.js":292,"./show-invisibles/prism-show-invisibles":293,"./show-invisibles/prism-show-invisibles.css":676,"./show-invisibles/prism-show-invisibles.js":293,"./show-invisibles/prism-show-invisibles.min":294,"./show-invisibles/prism-show-invisibles.min.js":294,"./show-language/prism-show-language":295,"./show-language/prism-show-language.js":295,"./show-language/prism-show-language.min":296,"./show-language/prism-show-language.min.js":296,"./toolbar/prism-toolbar":297,"./toolbar/prism-toolbar.css":677,"./toolbar/prism-toolbar.js":297,"./toolbar/prism-toolbar.min":298,"./toolbar/prism-toolbar.min.js":298,"./treeview/prism-treeview":299,"./treeview/prism-treeview.css":678,"./treeview/prism-treeview.js":299,"./treeview/prism-treeview.min":300,"./treeview/prism-treeview.min.js":300,"./unescaped-markup/prism-unescaped-markup":301,"./unescaped-markup/prism-unescaped-markup.css":679,"./unescaped-markup/prism-unescaped-markup.js":301,"./unescaped-markup/prism-unescaped-markup.min":302,"./unescaped-markup/prism-unescaped-markup.min.js":302,"./wpd/prism-wpd":303,"./wpd/prism-wpd.css":680,"./wpd/prism-wpd.js":303,"./wpd/prism-wpd.min":304,"./wpd/prism-wpd.min.js":304};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=667},683:function(e,t,n){},687:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(55),s=n.n(i),c=n(50),o=n(306),l=n.n(o),u=n(307),d=n(5),j=(n(357),n(358),n(359),n(360),n(28)),f=n(336),m=n(156),h=n(344),p=n(20),b=n(11),g=(n(463),n(4)),O=n.n(g),v=n(340),w=n(77),x=n(196),_=n.n(x),k=n(315),N=n.n(k),y=n(316),C=n.n(y),F="/settings",E="/plugins",S="/final",P=n(2),R=function(e,t){return e===t?"header__wizard-step_active":null},A=function(e){var t=e.activeStep,n=e.stepPressed,a=e.startProjectGenerating,i=e.generatedProject,s=Object(r.useState)(!1),c=Object(b.a)(s,2),o=c[0],l=c[1],u=Object(r.useCallback)((function(){t===E&&(a(),l(!0))}),[t]);return Object(r.useEffect)((function(){o&&i.blob&&(l(t===E),t===E&&n(S))}),[t,o,i]),Object(P.jsx)("div",{className:"header",children:Object(P.jsxs)("div",{className:"header__container",children:[Object(P.jsxs)("div",{className:"header__title-wrapper",children:[Object(P.jsx)("div",{className:"header__logo",children:Object(P.jsx)("a",{href:"https://ktor.io",children:Object(P.jsx)(v.a,{width:48})})}),Object(P.jsx)("h3",{className:"wt-h3 header__title",children:"Ktor Project Generator"})]}),Object(P.jsxs)("div",{className:"header__wizard-steps",children:[Object(P.jsxs)("div",{className:O()("wt-text-2","header__wizard-step",R(t,F)),onClick:function(){return n(F)},children:[Object(P.jsx)("span",{className:O()("header__wizard-step-number"),children:"1"})," Settings"]}),Object(P.jsx)("span",{className:"header__arrow",children:Object(P.jsx)(w.b,{glyph:_.a,size:w.a.Size14})}),Object(P.jsxs)("div",{className:O()("wt-text-2","header__wizard-step",R(t,E)),onClick:function(){return n(E)},children:[Object(P.jsx)("span",{className:O()("header__wizard-step-number"),children:"2"})," Plugins"]}),Object(P.jsx)("span",{className:"header__arrow",children:Object(P.jsx)(w.b,{glyph:_.a,size:w.a.Size14})}),Object(P.jsx)("div",{title:"Download generated project",className:O()("wt-text-2","header__wizard-step",{"header__wizard-step_active":t===S,"header__wizard-step_disabled":t===F}),onClick:u,children:Object(P.jsx)("span",{className:O()("header__wizard-step-number"),children:o?Object(P.jsx)(w.b,{className:"header__spin-icon",glyph:C.a,size:w.a.Size14}):Object(P.jsx)(w.b,{glyph:N.a,size:w.a.Size14})})})]})]})})},I=n(19),z=(n(465),n(73)),T=n(90),L=(n(474),n(341)),D=n(155),V=n(97),M=n(120),U=n(21),G=n(119);function K(e){return{key:"alert-".concat(Date.now()),type:G.b.Type.ERROR,message:e,isShaking:!0,timeout:5e3}}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return H(e.isRequiredForFeatures.reduce((function(e,t){return e.concat([t].concat(Object(U.a)(q(t,e))))}),t||[]))}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return H(e.requiredFeatures.reduce((function(e,t){return e.concat([t].concat(Object(U.a)(B(t,e))))}),t||[]))}function H(e){return Array.from(new Set(e.map((function(e){return e.id})))).map((function(t){return e.filter((function(e){return e.id===t}))[0]}))}function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40;return e.length>t?"".concat(e.substr(0,20),"..."):e}function W(e,t){var n=(t||"").toLowerCase().replace(/[^\w]+/g,"-").replace(/-$/g,"").replace(/^-/g,"")||"app";return"".concat((e||"").split(".").reverse().join("."),".").concat(n)}var Y=function(e){var t=e.isExpanded,n=e.isLoaded,r=e.children;return t?Object(P.jsx)("div",{className:"project-settings project-settings_expanded",children:n?r:Object(P.jsx)(V.a,{theme:"dark"})}):Object(P.jsx)("div",{className:"project-settings"})},$=function(e){var t=e.projectName,n=e.projectArtifact,a=e.buildSystem,i=e.onBuildSystemChange,s=e.website,c=e.onWebsiteChange,o=e.onArtifactChange,l=e.ktorProjectVersion,u=e.onKtorVersionChange,d=e.engine,j=e.onEngineChange,f=e.configurationIn,m=e.onConfigurationInChange,h=e.addDefaultRoutes,p=e.onAddDefaultRoutesChange,g=e.settingsOptions,O=e.isExpanded,v=e.settingsLoaded,w=g.buildSystem,x=g.ktorProjectVersion,_=g.engine,k=g.configurationIn,N=Object(r.useState)(!0),y=Object(b.a)(N,2),C=y[0],F=y[1];Object(r.useEffect)((function(){C&&o(W(s,t))}),[s,t,C]);var E=Object(r.useCallback)((function(e){F(!1),o(e.target.value)}),[o]);return Object(P.jsxs)(Y,{isExpanded:O,isLoaded:v,children:[Object(P.jsxs)("div",{children:[Object(P.jsxs)("div",{className:"project-settings__row",children:[Object(P.jsx)("div",{className:"wt-text-2 wt-text-2_hardness_hard wt-text-2_theme_dark project-settings__row-label",children:"Build system"}),Object(P.jsx)(L.a,{theme:"dark",size:"xs",value:a.value,onChange:function(e){return i(e)},options:w})]}),Object(P.jsxs)("div",{className:"project-settings__row",children:[Object(P.jsx)("div",{className:"wt-text-2 wt-text-2_hardness_hard wt-text-2_theme_dark project-settings__row-label",children:"Website"}),Object(P.jsx)(T.a,{size:"s",className:"project-settings__row-input",placeholder:"example.com",value:s,onChange:function(e){return c(e.target.value)},note:Object(P.jsx)("div",{className:"project-settings__note",children:"Domain is used to determine the package name"})})]}),Object(P.jsxs)("div",{className:"project-settings__row",children:[Object(P.jsx)("div",{className:"wt-text-2 wt-text-2_hardness_hard wt-text-2_theme_dark project-settings__row-label",children:"Artifact"}),Object(P.jsx)(T.a,{size:"s",className:"project-settings__row-input",placeholder:"com.example",onChange:E,value:n})]}),Object(P.jsxs)("div",{className:"project-settings__row",children:[Object(P.jsx)("div",{className:"wt-text-2 wt-text-2_hardness_hard wt-text-2_theme_dark project-settings__row-label",children:"Ktor version"}),Object(P.jsx)(D.a,{size:"s",className:"project-settings__row-input",placeholder:"Choose ktor version...",value:l,onChange:u,options:x})]}),Object(P.jsxs)("div",{className:"project-settings__row",children:[Object(P.jsx)("div",{className:"wt-text-2 wt-text-2_hardness_hard wt-text-2_theme_dark project-settings__row-label",children:"Engine"}),Object(P.jsx)(D.a,{size:"s",className:"project-settings__row-input",placeholder:"Choose engine...",value:d,onChange:j,options:_,note:Object(P.jsx)("div",{className:"project-settings__note",children:"If unsure, pick the default option"})})]})]}),Object(P.jsxs)("div",{className:"project-settings__row",children:[Object(P.jsx)("div",{className:"wt-text-2 wt-text-2_hardness_hard wt-text-2_theme_dark project-settings__row-label",children:"Configuration in"}),Object(P.jsx)(D.a,{size:"s",className:"project-settings__row-input",placeholder:"Choose configuration...",value:f,onChange:m,options:k})]}),Object(P.jsxs)("div",{className:"project-settings__row",children:[Object(P.jsx)("div",{className:"wt-text-2 wt-text-2_hardness_hard wt-text-2_theme_dark project-settings__row-label"}),Object(P.jsxs)("div",{className:"project-settings__checkbox",children:[Object(P.jsx)(M.b,{size:"s",theme:"dark",checked:h,onChange:function(e){return p(e.target.checked)},children:"Add sample code"}),Object(P.jsx)("div",{className:"wt-text-3 wt-text-3_theme_dark",children:"Useful if getting started with Ktor"})]})]})]})},Z=(n(573),n(324));function Q(e,t){return Object(r.useCallback)((function(t){var n=t.type,r=t.keyCode;("keydown"!==n||13!==r&&32!==r)&&"click"!==n||e()}),t)}var X=function(e){var t=e.isArrowUp,n=e.onToggle,r=e.children,a=Q((function(){return n(!t)}),[t]);return Object(P.jsxs)("span",{className:"wt-text-2 form-toggle-link",onClick:a,onKeyDown:a,tabIndex:"0",role:"link",children:[Object(P.jsx)("span",{className:"form-toggle-link__text",children:r}),Object(P.jsx)(Z.a,{size:"s",className:O()("form-toggle-link__arrow",{"form-toggle-link__arrow_up":t})})]})},ee={ACTION:"ktor-generator-web-action",ERROR:"ktor-generator-web-error",LINK:"ktor-generator-web-link",MOVE_TO_STEP:"ktor-generator-web-steps"},te=function(e){var t=e.nextStep,n=e.projectName,a=e.onProjectNameChange,i=Object(I.a)(e,["nextStep","projectName","onProjectNameChange"]),s=Object(r.useState)(!1),c=Object(b.a)(s,2),o=c[0],l=c[1],u=Object(r.useState)(!1),j=Object(b.a)(u,2),f=j[0],m=j[1],h=Object(r.useRef)(),g=Object(r.useCallback)((function(e){l(e),p.a.trackEvent(ee.LINK,"project-settings",{expanded:e})}),[]),O=Object(r.useCallback)((function(e){var t=(e.target.value||"").replace(/^[ \t\r\n]+/,"").replace(/['<>&]+/,"");m(!t),a(t)}),[a]);return Object(r.useLayoutEffect)((function(){h.current&&h.current.focus()}),[]),Object(P.jsxs)("div",{className:"project-form",children:[Object(P.jsxs)("div",{className:"project-form__project-name",children:[Object(P.jsx)("h3",{className:"wt-h3",children:"Project Name"}),Object(P.jsx)(T.a,{ref:h,className:"wt-offset-top-12",value:n,onChange:O,error:!!f&&"Please set a project name",placeholder:"Project name"})]}),Object(P.jsxs)("div",{className:"project-form__footer wt-offset-top-48",children:[Object(P.jsx)(z.a,{size:"s",mode:"contrast",theme:"dark",onClick:t,disabled:f,children:"Add plugins"}),Object(P.jsx)("span",{className:"project-form__footer-link-block",children:Object(P.jsx)(X,{onToggle:g,isArrowUp:o,children:"Adjust project settings"})})]}),Object(P.jsx)($,Object(d.a)({isExpanded:o,projectName:n},i))]})},ne="INITIALIZE",re="LOAD_SETTINGS",ae="LOAD_FEATURES",ie="LOAD_FEATURE_INFO",se="SHOW_FEATURE_INFO",ce="ADD_FEATURE",oe="REMOVE_FEATURE",le="SWITCH_PARAMETERS_MODE",ue="CHANGE_PARAMETER_VALUE",de="START_LOAD_FEATURES",je="START_PROJECT_GENERATING",fe="FINISH_PROJECT_GENERATING",me="HIDE_ALERT",he="SHOW_ALERT";function pe(e){return{value:e.id,label:e.value}}var be=Object(c.b)((function(e){var t=e.projectConfig,n=e.options,r=e.settingsLoaded;return{projectName:t.name,projectArtifact:t.artifact,website:t.website,buildSystem:pe(t.buildSystem),ktorProjectVersion:pe(t.ktorProjectVersion),engine:pe(t.engine),configurationIn:pe(t.configurationIn),settingsOptions:n,addDefaultRoutes:t.addDefaultRoutes,settingsLoaded:r}}),(function(e){return{changeParameter:function(t,n){return e({type:ue,payload:{name:t,value:n}})}}}))((function(e){var t=e.nextStep,n=e.projectName,r=e.projectArtifact,a=e.changeParameter,i=e.buildSystem,s=e.website,c=e.ktorProjectVersion,o=e.engine,l=e.configurationIn,u=e.addDefaultRoutes,d=e.settingsOptions,j=e.settingsLoaded;return Object(P.jsxs)("section",{className:"wt-container wt-offset-top-48",children:[Object(P.jsx)("div",{className:"wt-row wt-row_size_m wt-offset-top-12",children:Object(P.jsxs)("p",{className:"wt-text-2 wt-text-2_hardness_hard wt-col-7 wt-col-sm-12",children:[Object(P.jsx)("span",{children:"You can create a Ktor project in\xa0two\xa0simple step: enter your\xa0project\xa0name and click\xa0"}),Object(P.jsx)("strong",{children:"Add\xa0plugins"}),Object(P.jsx)("span",{children:"\xa0to\xa0select the\xa0plugins you need. You can also fine-tune the\xa0settings of\xa0your\xa0project."})]})}),Object(P.jsx)("div",{className:"wt-row wt-row_size_m wt-offset-top-24",children:Object(P.jsx)("div",{className:"wt-col-6 wt-col-sm-12",children:Object(P.jsx)(te,{nextStep:t,settingsLoaded:j,projectName:n,projectArtifact:r,ktorProjectVersion:c,onProjectNameChange:function(e){return a("name",e)},onArtifactChange:function(e){return a("artifact",e)},buildSystem:i,onBuildSystemChange:function(e){return a("buildSystem",e)},website:s,onWebsiteChange:function(e){return a("website",e)},onKtorVersionChange:function(e){return a("ktorProjectVersion",e)},engine:o,onEngineChange:function(e){return a("engine",e)},configurationIn:l,onConfigurationInChange:function(e){return a("configurationIn",e)},addDefaultRoutes:u,onAddDefaultRoutesChange:function(e){return a("addDefaultRoutes",e)},settingsOptions:d})})})]})})),ge=(n(574),n(98)),Oe=(n(575),n(576),n(154)),ve=n(333),we=n(691),xe=n(692),_e=(n(605),n(606),n(342)),ke=n(343);n(607);function Ne(e){return e.length>1?"plugins":"plugin"}var ye=function(e){var t=e.feature,n=e.addedParents,a=e.unusedDependencies,i=e.removeFeature,s=Object(r.useState)([]),c=Object(b.a)(s,2),o=c[0],l=c[1],u=Object(r.useCallback)((function(){var e=[t.id].concat([].concat(Object(U.a)(n),Object(U.a)(a.filter((function(e){return!o.some((function(t){return t.id===e.id}))})))).map((function(e){return e.id})));i(e)}),[t,n,a,i,o]),d=Object(r.useMemo)((function(){return n.length+a.length-o.length+1}),[n,a,o]);return Object(P.jsxs)("div",{className:"remove-feature-confirmation",children:[Object(P.jsxs)("div",{className:"remove-feature-confirmation__content",children:[n.length>0&&Object(P.jsxs)("div",{className:"remove-feature-confirmation__section",children:[Object(P.jsx)("strong",{children:'Removing "'.concat(t.name,'" will remove the following parent ').concat(Ne(n),":")}),n.map((function(e){return Object(P.jsx)("div",{className:"remove-feature-confirmation__list-item",children:Object(P.jsxs)("label",{className:"remove-feature-confirmation__label",children:[Object(P.jsx)(M.a,{defaultChecked:!0,disabled:!0}),Object(P.jsx)("div",{className:"remove-feature-confirmation__label-text",children:e.name})]})},e.id)}))]}),a.length>0&&Object(P.jsxs)("div",{className:"remove-feature-confirmation__section",children:[0===n.length&&Object(P.jsx)("strong",{children:'Removing "'.concat(t.name,'" will make the following ').concat(Ne(a)," unused:")}),n.length>0&&Object(P.jsx)("strong",{children:"...and will make the following ".concat(Ne(a)," unused:")}),a.map((function(e){return Object(P.jsx)("div",{className:"remove-feature-confirmation__list-item",children:Object(P.jsxs)("label",{className:"remove-feature-confirmation__label",children:[Object(P.jsx)(M.a,{checked:!o.some((function(t){return t.id===e.id})),onChange:function(t){var n=t.target;return function(e,t){var n=H(B(e).concat(t?q(e):[]).concat([e])).filter((function(e){return a.some((function(t){return t.id===e.id}))})),r=t?o.filter((function(e){return!n.some((function(t){return e.id===t.id}))})):H(o.concat(n));l(r)}(e,n.checked)}}),Object(P.jsx)("div",{className:"remove-feature-confirmation__label-text",children:e.name})]})},e.id)}))]})]}),Object(P.jsx)("div",{className:"remove-feature-confirmation__footer",children:Object(P.jsx)(z.a,{size:"xs",mode:"contrast",onClick:u,children:1===d?'Remove "'.concat(t.name,'"'):"Remove ".concat(d," plugins")})})]})},Ce=function(e){var t=e.feature,n=e.removeFeature,a=e.addFeature,i=e.isAlwaysShown,s=Object(r.useState)(!1),c=Object(b.a)(s,2),o=c[0],l=c[1],u=Object(r.useCallback)((function(){l(!o)}),[o]),j=Object(r.useCallback)((function(e){a(),e.stopPropagation()}),[a]),f=Object(r.useMemo)((function(){return{className:O()("feature-item__button",{"feature-item__button_shown":o||i}),size:"xs",mode:"contrast"}}),[o,i]),m=Object(r.useMemo)((function(){return t.wasAdded?q(t).filter((function(e){return e.wasAdded})):[]}),[t]),h=Object(r.useMemo)((function(){return t.wasAdded?B(t).filter((function(e){return(e.isRequiredForFeatures||[]).filter((function(e){return e.wasAdded&&!m.some((function(t){return t.id===e.id}))})).length<2})):[]}),[t,m]);return t.wasAdded?h.length||m.length?Object(P.jsx)(ke.a,{onShow:function(){return l(!0)},onHide:function(){return l(!1)},anchor:function(){return Object(P.jsx)(z.a,Object(d.a)(Object(d.a)({icon:Object(P.jsx)(Z.a,{})},f),{},{onClick:u,iconPosition:"right",children:"Remove"}))},children:Object(P.jsx)(_e.a,{children:Object(P.jsx)(ye,{feature:t,addedParents:m,unusedDependencies:h,removeFeature:n})})}):Object(P.jsx)(z.a,Object(d.a)(Object(d.a)({},f),{},{onClick:function(){return n([t.id])},children:"Remove"})):Object(P.jsx)(z.a,Object(d.a)(Object(d.a)({},f),{},{onClick:j,children:"Add"}))},Fe=a.a.forwardRef((function(e,t){var n=e.feature,a=e.isSelected,i=e.showControls,s=e.selectFeature,c=e.addFeature,o=e.removeFeature,l=Object(r.useCallback)((function(e){var t;"BUTTON"!==(null===(t=e.target.nodeName)||void 0===t?void 0:t.toUpperCase())&&s&&s()}),[s]);return Object(P.jsxs)("div",{ref:t,className:O()("feature-item",{"feature-item_selected":a,"feature-item_was-added":n.wasAdded}),onClick:l,onTouchStart:l,"aria-hidden":"true",children:[Object(P.jsxs)("div",{className:"feature-item__left-side",children:[Object(P.jsx)("div",{className:O()({"feature-item__name":!0,"wt-text-2":!0,"wt-text-2_hardness_hard":!0}),tabIndex:0,role:"link",children:n.name}),Object(P.jsx)("div",{className:O()("feature-item__description","wt-text-3"),children:n.description})]}),Object(P.jsx)(Ce,{feature:n,removeFeature:o,addFeature:c,isSelected:a,isAlwaysShown:i})]})}));function Ee(e,t){if(""===e)return t;var n=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},r=function(t,n){return function(r){var a=new RegExp(t(e),"i");return!!r[n]&&null!==r[n].match(a)}},a=r((function(e){return"^".concat(n(e))}),"name"),i=r(n,"name"),s=r(n,"description"),c=function(e){return a(e)||i(e)||s(e)};return t.map((function(e){return{name:e.name,features:e.features.filter(c)}})).filter((function(e){return e.features.length>0}))}n(608);var Se=function(e){var t=e.name;return Object(P.jsx)("div",{className:"wt-text-2 feature-item-separator",children:t})};function Pe(e,t){var n=e.reduce((function(e,t){var n=t.features;return e.concat(n||[])}),[]).map((function(e){return e.id}));return new ve.a({data:n,focused:n.indexOf(t)>-1?t:null})}var Re=function(e){var t=e.features,n=e.onFocus,a=e.autoFocus,i=e.addFeature,s=e.removeFeature,c=e.showRemoveButtons,o=e.featuresLoaded,l=Object(r.useState)(""),u=Object(b.a)(l,2),d=u[0],j=u[1],f=Object(r.useRef)(),m=Object(r.useRef)(),h=Object(r.useRef)({}),g=Object(r.useMemo)((function(){return Object.entries((e=t,n="group",e.reduce((function(e,t){return(e[t[n]]=e[t[n]]||[]).push(t),e}),{}))).map((function(e){var t=Object(b.a)(e,2);return{name:t[0],features:t[1]}}));var e,n}),[t]),O=Object(r.useState)(Ee(d.trim(),g)),v=Object(b.a)(O,2),w=v[0],x=v[1];Object(r.useEffect)((function(){x(Ee(d.trim(),g))}),[g,d]);var _=Object(r.useState)(Pe(w)),k=Object(b.a)(_,2),N=k[0],y=k[1],C=Object(r.useRef)(N),F=Object(r.useCallback)((function(e){var t;j(e);var n=Ee(e.trim(),g);x(n);var r=Pe(n,null===(t=C.current)||void 0===t?void 0:t.getFocused());y(r)}),[g]);Object(r.useEffect)((function(){var e,t,r=null===(e=C.current)||void 0===e?void 0:e.getFocused();C.current=N;var a=null===(t=C.current)||void 0===t?void 0:t.getFocused();r!==a&&a&&n(a)}),[N,n]);var E=Object(r.useMemo)((function(){return{up:function(){var t=C.current.moveUp();t&&(y(t),e(m.current,h.current[t.getFocused()]))},down:function(){var t=C.current.moveDown();t&&(y(t),e(m.current,h.current[t.getFocused()]))},enter:function(){var e=C.current.getFocused();e&&i&&i(e)}};function e(e,t){if(t){var n=t.getBoundingClientRect();if(e){var r=e.getBoundingClientRect(),a=r.y+r.height-n.y-n.height;if(a<0)e.scrollTop-=a-n.height;else{var i=r.y-n.y;i>0&&(e.scrollTop-=i)}}}}}),[i]),S=Object(r.useMemo)((function(){return"feature-list-".concat(Math.ceil(1e3*Math.random()))}),[]),R=Q((function(){F("")}),[]),A=Object(r.useCallback)((function(e){38!==e.keyCode&&40!==e.keyCode||e.metaKey||e.ctrlKey||e.preventDefault()}),[]);Object(r.useLayoutEffect)((function(){f.current&&a&&f.current.focus()}),[a]);var I=w.length?w.reduce((function(e,t){var n=t.name,r=t.features;return e.concat([Object(P.jsx)(Se,{name:n},n)].concat(Object(U.a)(r.map((function(e){var t=e.id===C.current.getFocused();return Object(P.jsx)(Fe,{ref:function(t){return h.current[e.id]=t},feature:e,isSelected:t,selectFeature:function(){return function(e){var t=C.current.focus(e);t&&y(t)}(e.id)},addFeature:function(){p.a.trackEvent(ee.ACTION,"add-plugin",{name:e.id}),i(e.id)},removeFeature:function(t){p.a.trackEvent(ee.ACTION,"remove-plugin",{name:e.id}),s(t)},showControls:e.wasAdded&&c||t},"feature-".concat(e.id+e.wasAdded))})))))}),[]):Object(P.jsxs)("div",{className:"features-list__no-content-container",children:[Object(P.jsx)("div",{children:Object(P.jsx)(we.a,{className:"wt-text-2 wt-text-3_hardness_pale"})}),Object(P.jsx)("div",{className:"wt-text-2 wt-text-3_hardness_pale",children:"No features found for the current filter "}),Object(P.jsx)("div",{className:"wt-text-2",children:Object(P.jsx)("span",{className:"wt-link wt-link_hardness_average",role:"link",tabIndex:0,onClick:R,onKeyDown:R,children:"Reset"})})]});return Object(P.jsxs)("div",{className:"features-list",children:[Object(P.jsx)(Oe.a,{map:E,scope:S}),Object(P.jsx)("div",{className:"features-list__search-panel",children:Object(P.jsx)(T.a,{className:"ring-js-shortcuts",ref:f,value:d||"",onChange:function(e){return F((e.target.value||"").replace(/^[ ]+/,"").replace(/[ ]+$/," "))},onKeyDown:A,placeholder:"Filter",size:"s",icon:Object(P.jsx)(xe.a,{})})}),Object(P.jsx)("div",{className:"features-list__list",ref:m,children:o?I:Object(P.jsxs)("div",{className:"features-list__no-content-container",children:[Object(P.jsx)(V.a,{theme:"light"}),Object(P.jsx)("div",{className:"wt-text-2 features-list__loading",children:"Loading..."})]})})]})},Ae=function(e){var t=e.features,n=e.isExpanded,a=e.onClose,i=e.removeFeature,s=e.selectFeature,c=Object(r.useState)(!n),o=Object(b.a)(c,2),l=o[0],u=o[1];return Object(r.useLayoutEffect)((function(){var e=!0;return n?u(!n):setTimeout((function(){e&&u(!n)}),500),function(){e=!1}}),[n]),Object(P.jsx)("div",{className:O()("added-features",{"added-features_shown":n}),children:!l&&Object(P.jsxs)("div",{className:"added-features__container",children:[Object(P.jsxs)("div",{className:"added-features__header",children:[Object(P.jsx)("h3",{className:"wt-h3 added-features__header-text",children:"Added plugins"}),Object(P.jsx)("h3",{className:"wt-h3 added-features__header-icon",children:Object(P.jsx)(ge.a,{role:"link",onClick:a})})]}),Object(P.jsx)("div",{className:"added-features__list",children:t.length?Object(P.jsx)(Re,{features:t,featuresLoaded:!0,onFocus:s,removeFeature:i}):Object(P.jsxs)("div",{className:"added-features__no-content",children:[Object(P.jsx)("div",{className:"wt-text-2 wt-text-3_hardness_pale",children:"(\u2312\u203f\u2312)"}),Object(P.jsx)("div",{className:"wt-text-2 wt-text-3_hardness_pale wt-offset-top-12",children:"You have not add any plugins to your project"}),Object(P.jsx)("div",{className:"wt-text-2",children:Object(P.jsx)("span",{className:"wt-link wt-link_hardness_average",role:"link",tabIndex:0,onClick:a,onKeyDown:a,children:"Back"})})]})})]})})},Ie=Object(c.b)((function(e){return{generatedProject:e.generatedProject}}),(function(e){return{onClick:function(){return e({type:je})}}}))((function(e){var t=e.onClick,n=e.generatedProject,a=e.onGenerate,i=Object(r.useState)(!1),s=Object(b.a)(i,2),c=s[0],o=s[1];Object(r.useEffect)((function(){n.blob&&c&&(o(!1),a())}),[n,c,a]);var l=Object(r.useCallback)((function(){c||(o(!0),t())}),[t,c]);return Object(P.jsx)(z.a,{onClick:l,mode:"contrast",theme:"dark",size:"s",busy:c,children:"Generate project"})})),ze=function(e){var t=e.features,n=e.featuresLoaded,a=e.showFeatureInfo,i=e.addFeature,s=e.nextStep,c=e.removeFeature,o=Object(r.useState)(!0),l=Object(b.a)(o,2),u=l[0],d=l[1],j=Object(r.useMemo)((function(){return t.filter((function(e){return e.wasAdded}))}),[t]),f=Object(r.useCallback)((function(e){d(e),p.a.trackEvent(ee.LINK,"view-added-plugins",{expanded:!e})}),[]),m=Q((function(){return f(!0)}),[f]),h=Object(r.useCallback)((function(){p.a.trackEvent(ee.ACTION,"clear-plugins-list"),c(j.map((function(e){return e.id})))}),[j,c]);return Object(P.jsx)("div",{className:"features-list-panel",children:Object(P.jsxs)("div",{className:"features-list-panel__container",children:[Object(P.jsx)("div",{className:"features-list-panel__description",children:Object(P.jsx)("h3",{className:"wt-h3",children:"Ktor Plugins"})}),Object(P.jsx)("div",{className:"features-list-panel__list",children:Object(P.jsx)(Re,{features:t,featuresLoaded:n,onFocus:a,addFeature:i,removeFeature:c,autoFocus:!0,showRemoveButtons:!0})}),Object(P.jsx)(Ae,{features:j,removeFeature:c,selectFeature:a,isExpanded:!u,onClose:m}),Object(P.jsxs)("div",{className:"features-list-panel__footer",children:[!j.length&&n&&Object(P.jsx)("div",{className:"wt-text-2 features-list-panel__footer-label",children:"No plugins added"}),!!j.length&&n&&Object(P.jsxs)("span",{className:"features-list-panel__form-toggle-panel",children:[Object(P.jsx)(X,{onToggle:d,isArrowUp:u,children:"".concat(j.length," ").concat(j.length>1?"plugins":"plugin"," added")}),Object(P.jsx)("span",{className:"features-list-panel__clear",title:"Clear",children:Object(P.jsx)(ge.a,{role:"link",title:"Clear",onClick:h,size:"xs"})})]}),Object(P.jsx)("span",{className:"features-list-panel__form-toggle-panel-margin",children:"\xa0"}),Object(P.jsx)(Ie,{onGenerate:s})]})]})})},Te=(n(609),n(334)),Le=n.n(Te),De=n(335),Ve=n.n(De),Me=(n(681),n(682),/[&<>"]/),Ue=/[&<>"]/g,Ge={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Ke(e){return Ge[e]}function qe(e){return Me.test(e)?e.replace(Ue,Ke):e}var Be=new Le.a("commonmark",{html:!0,linkify:!0,breaks:!0}).use(Ve.a,{defaultLanguageForUnspecified:"kotlin",defaultLanguageForUnknown:"kotlin",defaultLanguage:"kotlin"}).use((function(e){return e.renderer.rules.link_open=function(e,t){var n=e[t],r=n.attrGet("href")||"",a=n.attrGet("title")||"",i=O()(n.attrGet("class"),"wt-link"),s=a?' title="'.concat(a,'"'):"";return'<a class="'.concat(i,'" href="').concat(r,'"').concat(s,' target="_blank" rel="noopener noreferrer nofollow">')},e.renderer.rules.link_close=function(){return"</a>"},e})).use((function(e){return e.renderer.rules.code_inline=function(e,t,n,r,a){var i=e[t];return'<code class="wt-code" '.concat(a.renderAttrs(i),">").concat(qe(i.content),"</code>")},e.renderer.rules.code_block=function(e,t,n,r,a){var i=e[t];return'<pre class="wt-pre" '.concat(a.renderAttrs(i),"><code>").concat(qe(i.content),"</code></pre>")},e.renderer.rules.fence=function(e,t,n,r,a){var i=e[t],s=i.info?i.info.trim():"",c=s?s.split(/\s+/g)[0]:"",o=(n.highlight?n.highlight(i.content,c):"")||qe(i.content);return'<pre class="'.concat(O()("wt-pre",n.langPrefix+c),'"><code class="').concat(n.langPrefix+c,'" ').concat(a.renderAttrs(i),">").concat(o,"</code></pre>\n")},e}));var He=function(e){var t=e.code,n=Object(r.useMemo)((function(){return function(e){try{return Be.render(e)}catch(t){if(t instanceof TypeError)return console.warn("This is an unexpected require behavior bug in Webpack 4.\n      Please check if you specified correct names for languages in markdown."),"";throw t}}(t)}),[t]);return Object(P.jsx)("div",{className:"feature-info-markdown",dangerouslySetInnerHTML:{__html:n}})},Je=function(e){var t=e.description,n=e.usage,r=e.options,a=0===(n||"").indexOf("## ");return Object(P.jsxs)("div",{children:[t&&Object(P.jsx)("div",{className:"feature-info-section wt-text-2 wt-text-2_hardness_hard",children:Object(P.jsx)(He,{code:t})}),n&&Object(P.jsxs)("div",{className:"feature-info-section wt-text-2 wt-text-2_hardness_hard",children:[!a&&Object(P.jsx)("h4",{className:"wt-h4 wt-h4_flow",children:"Usage"}),Object(P.jsx)(He,{code:n})]}),r&&Object(P.jsxs)("div",{className:"feature-info-section wt-text-2 wt-text-2_hardness_hard",children:[Object(P.jsx)("h4",{className:"wt-h4 wt-h4_flow",children:"Options"}),Object(P.jsx)(He,{code:r})]})]})},We=Object(c.b)((function(e){return Object(d.a)({status:e.selectedFeatureId?e.docs[e.selectedFeatureId]?"has-info":"no-info":"not-selected",id:e.selectedFeatureId,name:e.selectedFeatureId&&e.features[e.selectedFeatureId].name},(e.docs[e.selectedFeatureId]||{}).content)}))((function(e){var t=e.status,n=e.name,r=e.description,a=e.usage,i=e.options;return"not-selected"===t?"":Object(P.jsxs)("div",{className:"feature-info pl-xl-5 pr-xl-5",children:[Object(P.jsx)("h3",{className:"wt-h3",children:n}),"has-info"===t&&Object(P.jsx)(Je,{description:r,usage:a,options:i}),"no-info"===t&&Object(P.jsx)(V.a,{className:"wt-offset-top-12",theme:"light"})]})})),Ye=(n(683),function(e){var t=e.children,n=Object(r.useRef)(),a=Object(r.useState)({}),i=Object(b.a)(a,2),s=i[0],c=i[1],o=Object(r.useCallback)((function(){var e=function(){var e,t,r=(null===(e=n.current)||void 0===e||null===(t=e.parentElement)||void 0===t?void 0:t.getBoundingClientRect())||{};if((r.y||0)<78){var a=32;return{left:"".concat(r.left,"px"),right:"".concat(r.right+a,"px"),top:"".concat(86,"px"),position:"fixed"}}return{}}();(Object.keys(e).length!==Object.keys(s).length||Object.keys(e).some((function(t){return e[t]!==s[t]})))&&c(e)}),[s]);return Object(r.useEffect)((function(){return window.addEventListener("scroll",o),window.addEventListener("resize",o),function(){window.removeEventListener("scroll",o),window.removeEventListener("resize",o)}}),[o]),Object(P.jsx)("div",{ref:n,style:s,className:"sticky-sidebar-container",children:t})}),$e=Object(c.b)((function(e){var t,n=e.features,r=e.featuresLoaded,a=e.projectConfig;return{projectName:a.name,featuresLoaded:r,features:(t=Object.keys(n).reduce((function(e,t){return e[t]=Object(d.a)(Object(d.a)({},n[t]),{},{id:t,wasAdded:a.addedFeatures.has(t)}),e}),{}),Object.keys(t).map((function(e){return t[e].requiredFeatures=i(t[e].requiredFeatures,t),t[e].isRequiredForFeatures=i(t[e].isRequiredForFeatures,t),t[e]})))};function i(e,t){return Array.from(e).map((function(e){return t[e]}))}}),(function(e){return{showFeatureInfo:function(t){return e({type:se,payload:{id:t}})},addFeature:function(t){return e({type:ce,payload:{id:t}})},removeFeature:function(t){return e({type:oe,payload:{ids:t}})}}}))((function(e){var t=e.features,n=e.featuresLoaded,r=e.projectName,a=e.showFeatureInfo,i=e.addFeature,s=e.removeFeature,c=e.nextStep;return Object(P.jsxs)("section",{className:"wt-container wt-offset-top-48",children:[Object(P.jsx)("div",{className:"wt-row wt-row_size_m wt-offset-top-12",children:Object(P.jsxs)("p",{className:"wt-text-2 wt-text-2_hardness_hard wt-col-md-8 wt-col-sm-12",children:[Object(P.jsx)("span",{children:"Select plugins you need in\xa0your\xa0"}),Object(P.jsx)("strong",{children:(r||"").length>40?"".concat(r.substr(0,20),"..."):r}),Object(P.jsx)("span",{children:"\xa0project."}),Object(P.jsx)("br",{}),Object(P.jsx)("span",{children:"You can also add or remove plugins later."})]})}),Object(P.jsxs)("div",{className:"wt-row wt-row_size_m wt-offset-top-24",children:[Object(P.jsx)("div",{className:"wt-col-6 wt-col-sm-12",children:Object(P.jsx)(Ye,{children:Object(P.jsx)(ze,{features:t,featuresLoaded:n,showFeatureInfo:a,addFeature:i,removeFeature:s,nextStep:c})})}),Object(P.jsx)("div",{className:"wt-col-6 wt-col-sm-inline",children:Object(P.jsx)(We,{})})]})]})})),Ze=function(e){var t=e.generatedProject,n=Object(r.useMemo)((function(){return window.URL.createObjectURL(t.blob||new Blob)}),[t]),a=Object(r.useCallback)((function(e){return p.a.trackEvent(ee.LINK,e)}),[]),i=Object(r.useCallback)((function(){return a("navigate-to-documentation")}),[a]),s=Object(r.useCallback)((function(){return a("download-by-direct-link")}),[a]);return Object(P.jsxs)("section",{className:"wt-container wt-offset-top-96",children:[Object(P.jsx)("h3",{className:"wt-h3",children:"Your Project is Ready to Go!"}),Object(P.jsx)("div",{className:"wt-row wt-row_size_m wt-offset-top-24",children:Object(P.jsxs)("p",{className:"wt-text-2 wt-text-2_hardness_hard wt-col-xlg-8 wt-col-sm-12",children:["Project ",Object(P.jsx)("strong",{children:J(t.fileName)})," download should start shortly.",Object(P.jsx)("br",{}),"If it does not, please, use the ",Object(P.jsx)("a",{className:"wt-link",href:n,onClick:s,download:t.fileName,children:"direct link"}),"."]})}),Object(P.jsx)("div",{className:"wt-row wt-row_size_m wt-offset-top-24",children:Object(P.jsx)("p",{className:"wt-text-2 wt-text-2_hardness_hard wt-col-xlg-8 wt-col-sm-12",children:Object(P.jsx)("a",{href:"https://ktor.io/docs/welcome.html",className:"wt-link",target:"_blank",onClick:i,rel:"noreferrer",children:"Docs and Tutorials"})})})]})},Qe=Object(c.b)((function(e){return{alerts:e.alerts}}),(function(e){return{onHideAlert:function(t){return e({type:me,payload:{alert:t}})}}}))((function(e){var t=e.alerts,n=e.onHideAlert;return Object(P.jsx)(G.a,{children:t.map((function(e){var r=e.message,a=e.key,i=Object(I.a)(e,["message","key"]);return Object(P.jsx)(G.b,Object(d.a)(Object(d.a)({},i),{},{onCloseRequest:function(){return function(e){t.filter((function(t){return e.key===t.key}))[0].isClosing=!0,window.setTimeout((function(){return n(e)}),300)}(e)},onClose:function(){return n(e)},children:r}),a)}))})})),Xe=function(e){var t=e.initialize,n=e.startProjectGenerating,a=e.generatedProject,i=Object(j.g)(),s=Object(j.h)().pathname;Object(r.useEffect)((function(){return t()}),[]),Object(r.useEffect)((function(){new h.a}),[]);var c=Object(r.useCallback)((function(e){p.a.trackEvent(ee.MOVE_TO_STEP,[s.split("/").pop(),e].join("-to-")),i.push({pathname:e})}),[s]),o=Object(r.useCallback)((function(){return c(E)}),[c]),l=Object(r.useCallback)((function(){return c(S)}),[c]);return Object(P.jsxs)(m.a,{className:"layout",children:[Object(P.jsx)(m.c,{children:Object(P.jsx)(A,{activeStep:s,stepPressed:c,startProjectGenerating:n,generatedProject:a})}),Object(P.jsx)(m.b,{className:"content",children:Object(P.jsxs)(j.d,{children:[Object(P.jsx)(j.b,{path:F,render:function(e){return console.log("params",e),Object(P.jsx)(be,{nextStep:o})}}),Object(P.jsx)(j.b,{path:E,render:function(e){return console.log("params",e),Object(P.jsx)($e,{nextStep:l})}}),Object(P.jsx)(j.b,{path:S,render:function(e){return console.log("params",e),(null===a||void 0===a?void 0:a.blob)?Object(P.jsx)(Ze,{generatedProject:a}):Object(P.jsx)(j.a,{to:F})}}),Object(P.jsx)(j.b,{path:"*",render:function(e){return console.log("params",e),Object(P.jsx)(j.a,{to:F})}})]})}),Object(P.jsx)(Qe,{})]})},et=Object(c.b)((function(e){var t,n=e.projectConfig,r=e.generatedProject;return{ktorVersionId:null===(t=n.ktorProjectVersion)||void 0===t?void 0:t.id,generatedProject:r}}),(function(e){return{initialize:function(){return e({type:ne})},startProjectGenerating:function(){return e({type:je})}}}))((function(e){return Object(P.jsx)(f.a,{basename:"/",children:Object(P.jsx)(Xe,Object(d.a)({},e))})})),tt=n(199),nt=n(337),rt=n(6);function at(e,t,n){return function n(r,a){var i=e(t,r)||new Set,s=new Set;return s.add(r),a>10||i.forEach((function(e){n(e,a+1).forEach(s.add.bind(s))})),s}(n,0)}var it={id:"",value:""},st={projectConfig:{website:"",name:"",artifact:"",kotlinProjectVersion:it,ktorProjectVersion:it,buildSystem:it,engine:it,configurationIn:it,addDefaultRoutes:!0,addedFeatures:new Set},features:{},docs:{},options:{kotlinProjectVersion:[],ktorProjectVersion:[],buildSystem:[],engine:[],configurationIn:[]},selectedFeatureId:"",parametersMode:"view",settingsLoaded:!1,featuresLoaded:!1,generatedProject:{},alerts:[]};function ct(e,t){if(void 0!==t&&(t.value||t.id))return t;var n=e.options.find((function(t){return t.id===e.default_id}));if(!n){var r=e.options[0];return{id:r.id,value:r.name}}return{id:n.id,value:n.name}}function ot(e,t){return t||e&&e.default||""}function lt(e,t){return e[t].options.map((function(e){return{value:e.id,label:e.name}}))}var ut="ktor.generator.web:config",dt=function(){var e="https://ktor-plugin.europe-north1-gke.intellij.net";try{return window.localStorage.getItem("ktor.generator.web:api")||e}catch(t){return e}}();function jt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"json";return fetch("".concat(dt).concat(e),t).then((function(e){return e.ok?e[n]():Promise.reject({message:e.statusText||"Something went wrong",status:e.status})}))}var ft=n(338),mt=n.n(ft);var ht=n(339);var pt=Object(tt.b)((function(e,t){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case re:var r,a,i=e.projectConfig||{},s=i.artifact,c=i.kotlinProjectVersion,o=i.ktorProjectVersion,l=i.buildSystem,u=i.engine,j=i.configurationIn,f=ot(n.company_website,null===(r=e.projectConfig)||void 0===r?void 0:r.website),m=ot(n.project_name,null===(a=e.projectConfig)||void 0===a?void 0:a.name),h=ct(n.ktor_version,o);return Object(d.a)(Object(d.a)({},e),{},{settingsLoaded:!0,projectConfig:Object(d.a)(Object(d.a)({},e.projectConfig||{}),{},{website:f,name:m,artifact:ot(W(f,m),s),kotlinProjectVersion:ct(n.kotlin_version,c),ktorProjectVersion:h,buildSystem:ct(n.build_system,l),engine:ct(n.engine,u),configurationIn:ct(n.configuration_in,j),addDefaultRoutes:!0}),options:{kotlinProjectVersion:lt(n,"kotlin_version"),ktorProjectVersion:lt(n,"ktor_version"),buildSystem:lt(n,"build_system"),engine:lt(n,"engine"),configurationIn:lt(n,"configuration_in")},ktorDefaultVersionId:n.ktor_version.default_id});case de:return Object(d.a)(Object(d.a)({},e),{},{featuresLoaded:!1});case ae:var p=function(e){var t=Object.keys(e);return t.reduce((function(n,r){var a=t.filter((function(t){return e[t].requiredFeatures.has(r)}));return Object(d.a)(Object(d.a)({},n),{},Object(rt.a)({},r,Object(d.a)(Object(d.a)({},e[r]),{},{isRequiredForFeatures:new Set(a)})))}),{})};return Object(d.a)(Object(d.a)({},e),{},{featuresLoaded:!0,features:p(n.reduce((function(e,t){var n=t.xmlId,r=t.name,a=t.description,i=t.version,s=t.requiredFeatures,c=t.group;return Object(d.a)(Object(d.a)({},e),{},Object(rt.a)({},n,{name:r,description:a,version:i,requiredFeatures:new Set(s),group:c}))}),{}))});case ie:return Object(d.a)(Object(d.a)({},e),{},{docs:Object(d.a)(Object(d.a)({},e.docs),{},Object(rt.a)({},n.id,n.data))});case se:return Object(d.a)(Object(d.a)({},e),{},{selectedFeatureId:t.payload.id});case ce:var b=e.projectConfig.addedFeatures;return at((function(e,t){return(e.features[t]||{}).requiredFeatures}),e,n.id).forEach(b.add.bind(b)),Object(d.a)(Object(d.a)({},e),{},{projectConfig:Object(d.a)(Object(d.a)({},e.projectConfig),{},{addedFeatures:b}),generatedProject:{}});case oe:var g=e.projectConfig.addedFeatures;return n.ids.forEach((function(e){return g.delete(e)})),Object(d.a)(Object(d.a)({},e),{},{generatedProject:{},projectConfig:Object(d.a)(Object(d.a)({},e.projectConfig),{},{addedFeatures:g})});case le:return Object(d.a)(Object(d.a)({},e),{},{parametersMode:"view"===e.parametersMode?"edit":"view"});case ue:var O=t.payload.name,v=e.projectConfig[O],w=t.payload.value,x="ktorProjectVersion"===O&&(null===v||void 0===v?void 0:v.id)!==(null===w||void 0===w?void 0:w.id);return Object(d.a)(Object(d.a)({},e),{},{projectConfig:Object(d.a)(Object(d.a)({},e.projectConfig),{},Object(rt.a)({},O,w),x&&{addedFeatures:new Set}),generatedProject:{}});case fe:return Object(d.a)(Object(d.a)({},e),{},{generatedProject:{blob:n.blob,fileName:n.fileName}});case me:return Object(d.a)(Object(d.a)({},e),{},{alerts:e.alerts.filter((function(e){return e.key!==t.payload.alert.key}))});case he:return Object(d.a)(Object(d.a)({},e),{},{alerts:e.alerts.concat([t.payload.alert])});default:return e}}(e,t);return window.state=n,n}),function(){try{var e,t=localStorage.getItem(ut);if(!t)return;var n=JSON.parse(t),r=new Set((null===(e=n.addedFeatures)||void 0===e?void 0:e.length)?n.addedFeatures:[]);return Object(d.a)(Object(d.a)({},st),{},{projectConfig:Object(d.a)(Object(d.a)(Object(d.a)({},st.projectConfig),n.projectConfig||{}),{},{addedFeatures:r})})}catch(a){return}}(),Object(tt.a)((function(e){var t=e.dispatch,n=e.getState,r=function(e){var n=e.message,r=e.status;return p.a.trackEvent(ee.ERROR,"load-settings",{status:r}),t({type:he,payload:{alert:K(n)}})};return function(e){return function(a){if(a.type===ne){var i=n().projectConfig;jt("/project/settings").then((function(e){var n;t({type:re,payload:e});var r=(null===i||void 0===i||null===(n=i.ktorProjectVersion)||void 0===n?void 0:n.id)||e.ktor_version.default_id;return function(e){var n=e.id,r=e.name;return t({type:ue,payload:{name:"ktorProjectVersion",value:{value:n,label:r}}})}(e.ktor_version.options.filter((function(e){return e.id===r}))[0])})).catch(r)}return e(a)}}}),(function(e){var t=e.dispatch,n=function(e){return t({type:ae,payload:e})};return function(e){return function(r){return r.type===ue&&r.payload&&"ktorProjectVersion"===r.payload.name&&(t({type:de}),jt("/features/".concat(r.payload.value)).then(n).catch((function(e){var t=e.status;return p.a.trackEvent(ee.ERROR,"load-features-on-version-change",{status:t})}))),e(r)}}}),(function(e){var t=e.dispatch,n=e.getState,r=function(e){return t({type:fe,payload:e})},a=function(e){var t=e.blob,n=e.fileName;return mt()(t,n,"application/zip"),r({blob:t,fileName:n})};return function(e){return function(i){if(i.type===je){var s,c=n(),o=c.projectConfig,l=c.generatedProject;if(l&&l.blob)return a(l);var u=Object.keys(o).reduce((function(e,t){var n=o[t];return Object(d.a)(Object(d.a)({},e),{},Object(rt.a)({},t,(n.id?n.id:n.value)||n))}),{}),j=u.artifact,f=u.website,m=u.name,h=u.ktorProjectVersion,b=u.kotlinProjectVersion,g=u.buildSystem,O=u.engine,v=u.configurationIn,w=u.addDefaultRoutes,x={settings:(s={},Object(rt.a)(s,"project_name",j),Object(rt.a)(s,"company_website",f),Object(rt.a)(s,"ktor_version",h),Object(rt.a)(s,"kotlin_version",b),Object(rt.a)(s,"build_system",g),Object(rt.a)(s,"engine",O),s),features:Array.from(o.addedFeatures),configurationOption:v,addDefaultRoutes:w};jt("/project/generate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(x)},"blob").then((function(e){var t="".concat(m,".zip");return a({blob:e,fileName:t})})).catch((function(e){var n,a=e.message,i=e.status;return r({}),p.a.trackEvent(ee.ERROR,"generating",{status:i}),Promise.reject((n="Failed to generate project. ".concat(a),t({type:he,payload:{alert:K(n)}})))}))}return e(i)}}}),(function(e){var t=e.dispatch,n=e.getState,r=function(e){return t({type:ie,payload:e})};return function(e){return function(a){if(a.type===se&&a.payload&&a.payload.id){var i,s=n(),c=s.docs,o=s.projectConfig,l=a.payload.id,u=null===(i=o.ktorProjectVersion)||void 0===i?void 0:i.id;c[l]&&c[l].version===u||jt("/feature/".concat(l,"/").concat(u,"/documentation")).then((function(e){return r({data:{version:u,content:e},id:l,version:u})})).catch((function(e){var n=e.message,a=e.status;return p.a.trackEvent(ee.ERROR,"load-feature-doc",{status:a,featureId:l,version:u}),r({id:l,data:null}),t({type:he,payload:{alert:K(n||"Something went wrong")}})}))}return e(a)}}}),(function(){var e=!1,t={};return function(n){return function(r){if(r.type!==ne||e)!function(e){var n,r,a;if(e.type===ue&&(null===(n=e.payload)||void 0===n?void 0:n.name)&&"name"!==e.payload.name&&!t[e.payload.name])p.a.trackEvent(ee.ACTION,"change-detailed-parameter",{name:null===(a=e.payload)||void 0===a?void 0:a.name}),t[e.payload.name]=!0;else if(e.type===se&&(null===(r=e.payload)||void 0===r?void 0:r.id)){var i;p.a.trackEvent(ee.ACTION,"view-plugin-info",{plugin:null===(i=e.payload)||void 0===i?void 0:i.id})}}(r);else{e=!0;var a=new ht.a("UA-47631155-3",!1,"");p.a.config([a]),p.a.trackPageView("/")}return n(r)}}}))),bt=Object(nt.a)(500,(function(){return function(e){var t,n=e.projectConfig,r=e.generatedProject;try{localStorage.setItem(ut,JSON.stringify((t=r&&r.blob,Object(d.a)(Object(d.a)({},n),{},{name:t?"":n.name,website:t?"":n.website,artifact:t?"":n.artifact,addedFeatures:t?[]:Array.from(n.addedFeatures||new Set)}))))}catch(a){}}(pt.getState())}));pt.subscribe(bt);var gt=pt;s.a.render(Object(P.jsxs)(c.a,{store:gt,children:[Object(P.jsx)(l.a,{url:u.a}),Object(P.jsx)(et,{})]}),document.getElementById("root"))}},[[687,1,2]]]);
//# sourceMappingURL=main.7027c82d.chunk.js.map